<!DOCTYPE html>
<html>
<head>
	<title>pebble-plex-remote config</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-theme.min.css" rel="stylesheet">

	<script type="text/javascript" src="js/jquery.min.js"></script>
	
</head>
<body>
    <div class="container">
		<div class="configure">
			<h2>Configure</h2>
	    	<form id="configure-form" class="form-configure well" action="#" method="POST">
	    		<h3>Server</h3>
	        	<div class="form-group">
	        		<label for="iTunesServer">iTunes Server</label>
	        		<input type="text" id="server" name="server" class="form-control" placeholder="192.168.1.117"/>
				</div>	
	        	
	        	<input class="btn btn-lg btn-primary btn-block" id="save" type="submit" value="Save"/>
	      </form>
	  </div>

    </div>
    <div class="footer container">
    	<p><a href="http://github.com/macecchi/pebble-itunes-remote">iTunes Remote</a></p>
    </div>
	<script type="text/javascript">
		function make_base_auth(user, password) {
  			var tok = user + ':' + password;
  			var hash = btoa(tok);
  			
  			return "Basic " + hash;
		}
		
		$("#server").val(localStorage.getItem("server"));
		$("#configure-form").submit(function(e) {
			var s = $("#server").val();

			var j = {
				server : s
			};

    		localStorage.setItem("server", s);  

			window.location.href = "pebblejs://close#" + JSON.stringify(j);

			e.preventDefault();
		});	
</script>
</body>
</html>